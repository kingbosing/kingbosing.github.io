<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>How transform HTML into PDF</title>
        <link rel="stylesheet" href="./css/style.css">
    </head>
    <body>
        
        <div class="tools">
            <button id="btn-Pdf">HTML->PDF</button>

            <button id="btn-canvas">HTML->canvas</button>
            
            <button id="btn-png">Download</button>
            
        </div>
       

        <div class="container">

            <div id="content">
                <div class="content-banner">
                    <img class="content-banner-logo" src="./image/logo.jpg" alt="logo">
                    <h2>HTML-->>PDF</h2>
                </div>
                <div class="content-main">

                    <h1>Hello World!</h1>
                    <h2>Hello World!</h2>
                    <h3>Hello World!</h3>
                    <h4>Hello World!</h4>
                    <h5>Hello World!</h5>
                    <h6>Hello World!</h6>
                    <a style="font-size:12px;color:#ccc">Hello World!--12#ccc</a><br>
                    <span>Hello World!</span><br>
                    <p>Hello World!  <a style="font-size:12px;color:#ccc">Hello World!--12#ccc</a></p><br>
                    <span style="font-size:14px;">Hello World!--14</span><br>
                    <i>Hello World!</i><br>
                    <hr style="color:#dedede">
                    <b style="font-size:12px;">Hello World!--12</b><br>
                    <h3>Hello World!</h3><br>
                     <a style="font-size:12px;color:#323232">Hello World!-12#323232</a><br>
                     <a style="font-size:12px;">Hello World!-12</a><br>

                     
                   

                </div>

            </div>

        </div>

<div id="images"></div>
        <script src="./js/jquery-3.1.0.js"></script>

        <script src="./js/jspdf.debug.js"></script>
        <script src="./js/html2canvas.js"></script>
        

        <!--<script src="toPng/js/html2canvas.min.js"></script>-->

	 <!--将canvas图片保存成图片 -->
	<script src="toPng/js/canvas2image.js"></script>
	<script src="toPng/js/base64.js"></script>
    <script>
            var dom=$("#content"); //你要转变的dom
            var width = dom.width();
            var height = dom.height();
            var type = "png";
            var scaleBy = 3;  //缩放比例
            var canvas = document.createElement('canvas');
            canvas.width = width * scaleBy;
            canvas.height = height * scaleBy+50;  //35是我处理完后发现短了一点，具体为什么不清楚,如果你也少的话，根据自己的项目调吧
            canvas.style.width = width * scaleBy + 'px';
            canvas.style.height = height * scaleBy + 'px';
            var context = canvas.getContext('2d');
            context.scale(scaleBy, scaleBy);
    </script>

<script src="./main.js?2"></script>
<script>
/*生成canvas图形*/

// 获取按钮id
var btnSave = document.getElementById("btn-canvas");
// 获取内容id
var content = document.getElementById("content");
// 进行canvas生成
btnSave.onclick = function(){
	html2canvas(content, {
        onrendered: function(canvas) {
        	//添加属性
        	canvas.setAttribute('id','thecanvas');
			//读取属性值
			// var value= canvas.getAttribute('id');
            document.getElementById('images').appendChild(canvas);
        }
	});
}
</script>
<script>
/*
 * 说明
 * html2canvas，目前该插件还在开发中，暂不支持带有图片的div转换。图片会被忽略
 * 对一些的默认样式的支持可能不那么尽如人意，建议自己定义样式,
 * 不支持iframe
 * 不支持跨域图片
 * 不能在浏览器插件中使用
 * 部分浏览器上不支持SVG图片
 * 不支持Flash
 * 不支持古代浏览器和IE，如果你想确认是否支持某个浏览器，可以用它访问 http://deerface.sinaapp.com/ 试试
 */
var Download = document.getElementById("btn-png");
Download.onclick = function(){
	var oCanvas = document.getElementById("thecanvas");

	/*自动保存为png*/
	// 获取图片资源
	var img_data1 = Canvas2Image.saveAsPNG(oCanvas, true).getAttribute('src');
	saveFile(img_data1, 'abc');


	/*下面的为原生的保存，不带格式名*/
	// 这将会提示用户保存PNG图片
	// Canvas2Image.saveAsPNG(oCanvas);
}
// 保存文件函数
var saveFile = function(data, filename){
    var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');
    save_link.href = data;
    save_link.download = filename;
   
    var event = document.createEvent('MouseEvents');
    event.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    save_link.dispatchEvent(event);
};
</script>
     </body>

</html>